function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _regeneratorRuntime(){_regeneratorRuntime=function(){return i};var u,i={},e=Object.prototype,s=e.hasOwnProperty,l=Object.defineProperty||function(e,t,n){e[t]=n.value},t="function"==typeof Symbol?Symbol:{},r=t.iterator||"@@iterator",n=t.asyncIterator||"@@asyncIterator",o=t.toStringTag||"@@toStringTag";function a(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{a({},"")}catch(u){a=function(e,t,n){return e[t]=n}}function c(e,t,n,r){var o,a,i,c,t=t&&t.prototype instanceof v?t:v,t=Object.create(t.prototype),r=new P(r||[]);return l(t,"_invoke",{value:(o=e,a=n,i=r,c=f,function(e,t){if(c===p)throw Error("Generator is already running");if(c===m){if("throw"===e)throw t;return{value:u,done:!0}}for(i.method=e,i.arg=t;;){var n=i.delegate;if(n){n=function e(t,n){var r=n.method,o=t.iterator[r];if(o===u)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=u,e(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),y;r=d(o,t.iterator,n.arg);if("throw"===r.type)return n.method="throw",n.arg=r.arg,n.delegate=null,y;o=r.arg;return o?o.done?(n[t.resultName]=o.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=u),n.delegate=null,y):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,y)}(n,i);if(n){if(n===y)continue;return n}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if(c===f)throw c=m,i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);c=p;n=d(o,a,i);if("normal"===n.type){if(c=i.done?m:h,n.arg===y)continue;return{value:n.arg,done:i.done}}"throw"===n.type&&(c=m,i.method="throw",i.arg=n.arg)}})}),t}function d(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}i.wrap=c;var f="suspendedStart",h="suspendedYield",p="executing",m="completed",y={};function v(){}function g(){}function b(){}var t={},_=(a(t,r,function(){return this}),Object.getPrototypeOf),_=_&&_(_(D([]))),w=(_&&_!==e&&s.call(_,r)&&(t=_),b.prototype=v.prototype=Object.create(t));function k(e){["next","throw","return"].forEach(function(t){a(e,t,function(e){return this._invoke(t,e)})})}function x(i,c){var t;l(this,"_invoke",{value:function(n,r){function e(){return new c(function(e,t){!function t(e,n,r,o){var a,e=d(i[e],i,n);if("throw"!==e.type)return(n=(a=e.arg).value)&&"object"==_typeof(n)&&s.call(n,"__await")?c.resolve(n.__await).then(function(e){t("next",e,r,o)},function(e){t("throw",e,r,o)}):c.resolve(n).then(function(e){a.value=e,r(a)},function(e){return t("throw",e,r,o)});o(e.arg)}(n,r,e,t)})}return t=t?t.then(e,e):e()}})}function I(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function P(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(I,this),this.reset(!0)}function D(t){if(t||""===t){var n,e=t[r];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return n=-1,(e=function e(){for(;++n<t.length;)if(s.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=u,e.done=!0,e}).next=e}throw new TypeError(_typeof(t)+" is not iterable")}return l(w,"constructor",{value:g.prototype=b,configurable:!0}),l(b,"constructor",{value:g,configurable:!0}),g.displayName=a(b,o,"GeneratorFunction"),i.isGeneratorFunction=function(e){e="function"==typeof e&&e.constructor;return!!e&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},i.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,a(e,o,"GeneratorFunction")),e.prototype=Object.create(w),e},i.awrap=function(e){return{__await:e}},k(x.prototype),a(x.prototype,n,function(){return this}),i.AsyncIterator=x,i.async=function(e,t,n,r,o){void 0===o&&(o=Promise);var a=new x(c(e,t,n,r),o);return i.isGeneratorFunction(t)?a:a.next().then(function(e){return e.done?e.value:a.next()})},k(w),a(w,o,"Generator"),a(w,r,function(){return this}),a(w,"toString",function(){return"[object Generator]"}),i.keys=function(e){var t,n=Object(e),r=[];for(t in n)r.push(t);return r.reverse(),function e(){for(;r.length;){var t=r.pop();if(t in n)return e.value=t,e.done=!1,e}return e.done=!0,e}},i.values=D,P.prototype={constructor:P,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=u,this.done=!1,this.delegate=null,this.method="next",this.arg=u,this.tryEntries.forEach(S),!e)for(var t in this)"t"===t.charAt(0)&&s.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=u)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(n){if(this.done)throw n;var r=this;function e(e,t){return a.type="throw",a.arg=n,r.next=e,t&&(r.method="next",r.arg=u),!!t}for(var t=this.tryEntries.length-1;0<=t;--t){var o=this.tryEntries[t],a=o.completion;if("root"===o.tryLoc)return e("end");if(o.tryLoc<=this.prev){var i=s.call(o,"catchLoc"),c=s.call(o,"finallyLoc");if(i&&c){if(this.prev<o.catchLoc)return e(o.catchLoc,!0);if(this.prev<o.finallyLoc)return e(o.finallyLoc)}else if(i){if(this.prev<o.catchLoc)return e(o.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return e(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;0<=n;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&s.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}var a=(o=o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc?null:o)?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,y):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),y},finish:function(e){for(var t=this.tryEntries.length-1;0<=t;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),S(n),y}},catch:function(e){for(var t=this.tryEntries.length-1;0<=t;--t){var n,r,o=this.tryEntries[t];if(o.tryLoc===e)return"throw"===(n=o.completion).type&&(r=n.arg,S(o)),r}throw Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:D(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=u),y}},i}function ownKeys(t,e){var n,r=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)),r}function _objectSpread(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ownKeys(Object(n),!0).forEach(function(e){_defineProperty(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function _defineProperty(e,t,n){return(t=_toPropertyKey(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _toPropertyKey(e){e=_toPrimitive(e,"string");return"symbol"==_typeof(e)?e:e+""}function _toPrimitive(e,t){if("object"!=_typeof(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0===n)return("string"===t?String:Number)(e);n=n.call(e,t||"default");if("object"!=_typeof(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}function asyncGeneratorStep(e,t,n,r,o,a,i){try{var c=e[a](i),u=c.value}catch(e){return void n(e)}c.done?t(u):Promise.resolve(u).then(r,o)}function _asyncToGenerator(c){return function(){var e=this,i=arguments;return new Promise(function(t,n){var r=c.apply(e,i);function o(e){asyncGeneratorStep(r,t,n,o,a,"next",e)}function a(e){asyncGeneratorStep(r,t,n,o,a,"throw",e)}o(void 0)})}}((_,w)=>{var a=!1,k="1429042787694485",e="https://fozplaza.com.br/wp-json/inktrack/v1",i="".concat(e,"/evento"),x="".concat(e,"/usuario/enriquecer"),o="".concat(e,"/usuario/sincronizar"),r="".concat(e,"/status/check-eligibility"),c="".concat(e,"/usuario/lookup-by-ip"),I="ink_external_id",S="ink_uid",P="_fbc",D="_fbp",u=["PageView","pageview","ViewPage","Lead","InitiateCheckout","AddToCart","AddPaymentInfo","Purchase","ViewContent","Search","ViewSearchResults","AddToWishlist","CompletePayment","Contact"],O=_.INKTRACK||{},E=function(e,t,n){var r,o;a&&(o={log:"color: #0073aa;",warn:"color: #ffb900;",error:"color: #dc3232;",enrich:"color: #ff6f61;",init:"color: #4CAF50; font-weight: bold;",identity:"color: #9C27B0;",omni:"color: #f36c21; font-weight: bold;"},r=console[e]&&"function"==typeof console[e]?e:"log",e=o[e]||o.log,o="[INKTRACK]",n?console[r]("%c".concat(o," ").concat(t),e,n):console[r]("%c".concat(o," ").concat(t),e))},s=function(e,t,n){var r,o="";n&&((r=new Date).setTime(r.getTime()+24*n*60*60*1e3),o="; expires="+r.toUTCString()),w.cookie=e+"="+(t||"")+o+"; path=/; SameSite=Lax; Secure"},j=function(e){for(var t=e+"=",n=w.cookie.split(";"),r=0;r<n.length;r++){for(var o=n[r];" "===o.charAt(0);)o=o.substring(1,o.length);if(0===o.indexOf(t))return o.substring(t.length,o.length)}return null};function l(){return t.apply(this,arguments)}function t(){return(t=_asyncToGenerator(_regeneratorRuntime().mark(function e(t){var n,r;return _regeneratorRuntime().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return E("identity","Sincronizando ID: ".concat(t," com o servidor...")),e.prev=1,e.next=4,fetch(o,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({external_id:t})});case 4:if((n=e.sent).ok){e.next=7;break}throw new Error("API retornou status ".concat(n.status));case 7:return e.next=9,n.json();case 9:if((r=e.sent).success&&r.userData)return E("identity","Sincronização bem-sucedida.",r.userData),(r.userData.fbc||r.userData.fbp)&&(E("identity","Valores de fbc/fbp recebidos do servidor. Injetando no navegador..."),r.userData.fbc&&s(P,r.userData.fbc,90),r.userData.fbp)&&s(D,r.userData.fbp,730),e.abrupt("return",r.userData);e.next=14;break;case 14:throw new Error("Resposta da API de sincronização inválida.");case 17:return e.prev=17,e.t0=e.catch(1),E("error","Falha ao sincronizar usuário.",e.t0),e.abrupt("return",{external_id:t});case 21:case"end":return e.stop()}},e,null,[[1,17]])}))).apply(this,arguments)}function L(){return(L=_asyncToGenerator(_regeneratorRuntime().mark(function e(){var t,n,r,o,a,i;return _regeneratorRuntime().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=new URLSearchParams(_.location.search),t=t.get(I),(n=function(e){return e&&30<=e.length})(t))return E("identity","ID encontrado na URL: ".concat(t,". Validando...")),e.next=7,l(t);e.next=16;break;case 7:if((r=e.sent)&&1<Object.keys(r).length)return E("identity","ID da URL validado com sucesso."),localStorage.setItem(I,t),s(S,t,730),e.abrupt("return",{id:t,userData:r});e.next=13;break;case 13:E("warn","ID da URL inválido ou não encontrado no banco de dados. Descartando."),e.next=17;break;case 16:t&&E("warn",'ID da URL encontrado "'.concat(t,'" é inválido (curto demais). Descartando.'));case 17:if(t=localStorage.getItem(I),n(t))return E("identity","ID encontrado no LocalStorage: ".concat(t)),e.next=22,l(t);e.next=24;break;case 22:return r=e.sent,e.abrupt("return",{id:t,userData:r});case 24:if(t=j(S),n(t))return E("identity","ID encontrado no Cookie: ".concat(t)),localStorage.setItem(I,t),e.next=30,l(t);e.next=32;break;case 30:return o=e.sent,e.abrupt("return",{id:t,userData:o});case 32:return e.prev=32,E("identity","Nenhuma identidade local encontrada. Tentando busca por IP..."),e.next=36,fetch(c);case 36:if((o=e.sent).ok)return e.next=40,o.json();e.next=50;break;case 40:if((a=e.sent).success&&n(a.external_id))return t=a.external_id,E("identity","ID encontrado via IP: ".concat(t,". Persistindo localmente.")),localStorage.setItem(I,t),s(S,t,730),e.next=48,l(t);e.next=50;break;case 48:return a=e.sent,e.abrupt("return",{id:t,userData:a});case 50:e.next=55;break;case 52:e.prev=52,e.t0=e.catch(32),E("warn","Busca por IP falhou ou não retornou resultados.",e.t0);case 55:return t="uid.c."+Date.now()+"."+Math.random().toString(36).substring(2,15),E("identity","Nenhum ID encontrado. Gerando novo ID: ".concat(t)),localStorage.setItem(I,t),s(S,t,730),e.next=61,l(t);case 61:return i=e.sent,e.abrupt("return",{id:t,userData:i});case 63:case"end":return e.stop()}},e,null,[[32,52]])}))).apply(this,arguments)}function q(){return(q=_asyncToGenerator(_regeneratorRuntime().mark(function e(){var t,n;return _regeneratorRuntime().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(r);case 3:if((t=e.sent).ok){e.next=7;break}return E("warn","API de elegibilidade falhou. Assumindo que o usuário é elegível (fail-open)."),e.abrupt("return",!0);case 7:return e.next=9,t.json();case 9:if(!1===(n=e.sent).eligible)return E("warn","Usuário não é elegível para rastreamento. Razão: ".concat(n.reason,". Abortando.")),e.abrupt("return",!1);e.next=13;break;case 13:return e.abrupt("return",!0);case 16:return e.prev=16,e.t0=e.catch(0),E("error","Erro ao verificar elegibilidade. Assumindo que o usuário é elegível (fail-open).",e.t0),e.abrupt("return",!0);case 20:case"end":return e.stop()}},e,null,[[0,16]])}))).apply(this,arguments)}function n(){return(n=_asyncToGenerator(_regeneratorRuntime().mark(function e(){var g,b;return _regeneratorRuntime().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,function(){return q.apply(this,arguments)}();case 2:if(e.sent){e.next=5;break}return e.abrupt("return");case 5:var t;return _.fbq?E("init","Script da Meta (fbq) já existe. Pulando injeção."):(E("init","Injetando script base da Meta (fbevents.js)..."),h=w,(n=_).fbq||(t=n.fbq=function(){t.callMethod?t.callMethod.apply(t,arguments):t.queue.push(arguments)},n._fbq||(n._fbq=t),(t.push=t).loaded=!0,t.version="2.0",t.queue=[],(n=h.createElement("script")).async=!0,n.src="https://connect.facebook.net/en_US/fbevents.js",(h=h.getElementsByTagName("script")[0]).parentNode.insertBefore(n,h))),e.next=8,function(){return L.apply(this,arguments)}();case 8:if(b=e.sent,g=b.id,b=b.userData,g){e.next=14;break}return E("error","Inicialização abortada: Não foi possível obter ou gerar um ID de usuário."),e.abrupt("return");case 14:E("init","Inicializando Pixel ID: ".concat(k),b),_.fbq("init",k,b),E("init","Disparando evento PageView..."),O.track("PageView",{},g),p=h=d=f=l=s=u=c=i=a=o=r=n=void 0;var n=b;if("book.omnibees.com"===_.location.hostname)try{for(var r=null,o=0;o<localStorage.length;o++){var a=localStorage.key(o);if(a.startsWith("checkoutHistory_")){r=JSON.parse(localStorage.getItem(a));break}}if(r&&Array.isArray(r)&&0!==r.length){E("omni","Histórico de checkout encontrado no localStorage. Tentando enriquecimento proativo.",r);for(var i=null,c=null,u=null,s=null,l=r.length-1;0<=l;l--){var d,f=r[l];if(!i&&f["input-email"]&&(i=f["input-email"]),!c&&f["input-name"]&&(c=f["input-name"]),!u&&f["input-lastname"]&&(u=f["input-lastname"]),!s&&f["input-phone"]&&f["phone-country-select"]&&(d="".concat(f["phone-country-select"]).concat(f["input-phone"]),s=d.replace(/\D/g,"")),i&&c&&u&&s)break}var h={};i&&!n.em&&(h.em=i),c&&!n.fn&&(h.fn=c),u&&!n.ln&&(h.ln=u),s&&!n.ph&&(h.ph=s),0<Object.keys(h).length&&(E("omni","Enriquecimento proativo: enviando dados do histórico para preencher lacunas.",h),p=j(S)||localStorage.getItem(I))&&fetch(x,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({external_id:p,userData:h}),keepalive:!0}).then(function(e){return e.json()}).then(function(e){E("omni","Resposta do servidor ao enriquecimento proativo:",e)}).catch(function(e){E("error","Erro na chamada de enriquecimento proativo.",e)})}}catch(e){E("error","Falha ao processar histórico de checkout do localStorage.",e)}v=y=m=p=void 0;var p=b,m=j(P),y=j(D),v={};m&&m!==p.fbc&&(v.fbc=m),y&&y!==p.fbp&&(v.fbp=y),0<Object.keys(v).length?(E("enrich","Novos valores de fbc/fbp detectados no navegador. Sincronizando com o backend...",v),T(v)):E("log","Cookies fbc/fbp do navegador já estão em sincronia com o backend."),[{seletor:'input[name*="email"]',chave:"em",tipo:"texto"},{seletor:'input[name*="phone"]',chave:"ph",tipo:"telefone"},{seletor:'input[name*="first_name"]',chave:"fn",tipo:"texto"},{seletor:'input[name*="last_name"]',chave:"ln",tipo:"texto"}].forEach(function(e){var t=e.seletor,n=e.chave,r=e.tipo;w.addEventListener("blur",function(e){e.target.matches(t)&&(e=e.target.value.trim(),"texto"===r?e=e.toLowerCase():"telefone"===r&&(e=e.replace(/\D/g,"")),e)&&T(_defineProperty({},n,e))},!0)}),(()=>{var r,o;"book.omnibees.com"===_.location.hostname&&(E("omni","Integração Omnibees DataLayer ativada."),_.dataLayer=_.dataLayer||[],r=function(e){var t,n;e&&e.event&&("ecommerceSearch"===e.event?(E("omni","Evento ecommerceSearch da Omnibees detectado.",e),C(t={content_type:"hotel",checkin_date:e.checkIn,checkout_date:e.checkOut,num_adults:e.numberAdults,num_children:e.numberChildren,destination:"Foz do Iguaçu, Paraná",region:"Foz do Iguaçu, PR",city:"Foz do Iguaçu",country:"Brazil",hotel_id:e.hotelId,currency:e.ecommerce?e.ecommerce.currency:"BRL"}),E("omni",'Disparando eventos "Search" e "BuscaData".',t),O.track("Search",t),O.track("BuscaData",t),O.track("ViewContent",t)):"ecommerceCheckout"===e.event?e.userEmail?(E("omni","Evento ecommerceCheckout (Passo 2) detectado.",e),t={em:e.userEmail,fn:e.firstName,ln:e.lastName},(n=null==(n=e.ecommerce)||null==(n=n.checkout)||null==(n=n.guestData)?void 0:n.phone)&&!n.includes("*")&&(t.ph=n.replace(/\D/g,"")),T(t),C(t={value:null==(n=e.ecommerce)?void 0:n.value,currency:null==(t=e.ecommerce)?void 0:t.currency,content_type:"hotel",destination:"Foz do Iguaçu, Paraná",region:"Foz do Iguaçu, PR",city:"Foz do Iguaçu",country:"Brazil",hotel_id:e.hotelId,content_ids:null==(n=e.ecommerce)||null==(n=n.items)?void 0:n.map(function(e){return e.item_id}),contents:null==(t=e.ecommerce)||null==(t=t.items)?void 0:t.map(function(e){return{id:e.item_id,quantity:e.quantity,item_price:e.price}}),num_items:null==(n=e.ecommerce)||null==(n=n.items)?void 0:n.reduce(function(e,t){return e+t.quantity},0),checkin_date:e.checkIn,checkout_date:e.checkOut,num_adults:e.numberAdults,num_children:e.numberChildren}),E("omni",'Disparando evento "InitiateCheckout".',t),O.track("InitiateCheckout",t)):(E("omni","Evento ecommerceCheckout (Passo 1) detectado.",e),C(n={value:null==(n=e.ecommerce)?void 0:n.value,currency:null==(t=e.ecommerce)?void 0:t.currency,content_type:"hotel",destination:"Foz do Iguaçu, Paraná",region:"Foz do Iguaçu, PR",city:"Foz do Iguaçu",country:"Brazil",hotel_id:e.hotelId,content_ids:null==(n=e.ecommerce)||null==(n=n.items)?void 0:n.map(function(e){return e.item_id}),contents:null==(t=e.ecommerce)||null==(t=t.items)?void 0:t.map(function(e){return{id:e.item_id,quantity:e.quantity,item_price:e.price}}),checkin_date:e.checkIn,checkout_date:e.checkOut,num_adults:e.numberAdults,num_children:e.numberChildren}),E("omni",'Disparando evento "AddToCart".',n),O.track("AddToCart",n)):"ecommercePurchase"===e.event&&(E("omni","Evento ecommercePurchase detectado.",e),t={em:e.userEmail,fn:e.firstName,ln:e.lastName},(n=e.userTel)&&!n.includes("*")&&(t.ph=n.replace(/\D/g,"")),T(t),C(n={value:null==(n=e.ecommerce)?void 0:n.value,currency:null==(t=e.ecommerce)?void 0:t.currency,order_id:null==(n=e.ecommerce)?void 0:n.transaction_id,transaction_id:null==(t=e.ecommerce)?void 0:t.transaction_id,content_type:"hotel",content_ids:null==(n=e.ecommerce)||null==(n=n.items)?void 0:n.map(function(e){return e.item_id}),contents:null==(t=e.ecommerce)||null==(t=t.items)?void 0:t.map(function(e){return{id:e.item_id,quantity:e.quantity,item_price:e.price}}),num_items:null==(n=e.ecommerce)||null==(n=n.items)?void 0:n.reduce(function(e,t){return e+t.quantity},0),checkin_date:e.checkIn,checkout_date:e.checkOut,num_adults:e.numberAdults,num_children:e.numberChildren,destination:"Foz do Iguaçu, Paraná",region:"Foz do Iguaçu, PR",city:"Foz do Iguaçu",country:"Brazil",hotel_id:e.hotelId,payment_type:null==(t=e.ecommerce)?void 0:t.payment_type}),E("omni",'Disparando evento "Purchase".',n),O.track("Purchase",n)))},_.dataLayer.forEach(r),o=_.dataLayer.push,_.dataLayer.push=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.forEach(r),o.apply(_.dataLayer,t)})})();case 22:case"end":return e.stop()}},e)}))).apply(this,arguments)}function C(t){t&&Object.keys(t).forEach(function(e){null!=t[e]&&""!==t[e]||delete t[e]})}function T(e){var t=j(S)||localStorage.getItem(I);if(t){E("enrich","Enriquecendo dados do usuário (via sendBeacon)...",e);t=JSON.stringify({external_id:t,userData:e});try{navigator.sendBeacon(x,t)||E("error","Falha ao enviar beacon de enriquecimento. O navegador pode ter bloqueado ou a fila estava cheia.")}catch(e){E("error","Exceção ao tentar enviar beacon de enriquecimento.",e)}}}(_.INKTRACK=O).track=function(e){var t,n,r,o=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},a=(2<arguments.length&&void 0!==arguments[2]?arguments[2]:null)||j(S)||localStorage.getItem(I);a?(r="externo.".concat(Date.now(),".").concat(Math.random().toString(36).substring(2,9)),E("log","Rastreando evento: ".concat(e),_objectSpread({idEvento:r},o)),"function"==typeof _.fbq?(t=u.includes(e)?"trackSingle":"trackSingleCustom",_.fbq(t,k,e,o,{eventID:r}),E("log","(Client-Side) Evento '".concat(e,"' enviado via fbq com a função '").concat(t,"'."))):E("warn","(Client-Side) window.fbq não encontrado."),t=j(P),n=j(D),r={event_name:e,event_id:r,event_source_url:_.location.href,params:o,external_id:a,fbc:t||void 0,fbp:n||void 0},navigator.sendBeacon(i,JSON.stringify(r)),E("log","(Server-Side) Evento '".concat(e,"' enviado para a API."))):E("error","Não é possível rastrear o evento sem um ID externo.")},function(){n.apply(this,arguments)}()})(window,document);